/* global ID_CLICK_BY_HISTORY: true *//* global G_SCRIPTS_LOADED, mcq_timers */// copied from base1.0.1.js - Start
function $$(a){var b;if(jq_cache.hasOwnProperty(b))return jq_cache[b];var c=$(a);return jq_cache[a]=c,c}function registerEvents(){$testExperienceApp.delegate("input[type=submit], button:not(.compile-test-button)","click",function(a){var b=$(this).parent().attr("private-url-hash"),c=$(".mcq-options-"+b),d=c.find("input[type=radio]");if(d.length>0){if(!d.is(":checked"))return}else markAttempted(b)}),$testExperienceApp.on("click","input[type=radio]",enable_submit_button),$testExperienceApp.on("click",".reset-answer-js-only",reset_mcq_answer),$testExperienceApp.on("click",".reset-answer",function(){var a=$(this).parent().attr("private-url-hash");markUnAttempted(a)}),$testExperienceApp.on("input propertychange","#wmd-input",function(){var a=$(".wmd-preview-container");a.hasClass("hidden")&&a.removeClass("hidden")}),$(".question-item").each(function(){PROBLEM_LIST.push($(this))}),$("#end-test-click").live("click",function(){CLOSE_BROWSER=!0}),$(".alert-message").live("click",".close-icon",function(){var a=$(this);if(a.hasClass("alert-message"))a.remove();else{var b=a.closest(".alert-message");b.length?b.remove():$("#alert-message-holder").find(".alert-message").not(".hidden").remove()}}),$(".right-pane").on("keyup input",".wmd-input",function(){var a=this.offsetHeight-this.clientHeight,b=$(".right-pane").scrollTop();$(this).css("height","auto").css("height",this.scrollHeight+a),$(".right-pane").scrollTop(b)}).removeAttr("data-autoresize"),$("body").on("click",".show-hide",function(a){a.preventDefault();var b=$(this),c=b.attr("hide"),d=$("#"+c),e=b.attr("show"),f=$("#"+e);d.hide(),f.show()})}function lazyLoadAssessment(){$.ajax({type:"GET",url:"/AJAX/"+window.headerObj.eventSlug+"/problems-lazy-load/",success:function(a){$("body").append(a)},error:function(){$(".flow-help").closest(".tool-tip").remove()}})}function startInititalTimers(a){for(var b in a)a.hasOwnProperty(b)&&startTimer(parseInt(b),parseInt(a[b]))}function startTimer(a,b,c){function e(){$(".countdown-left-"+a).show();var c=$(".countdown-"+a),e=$(".countdown-left-"+a);if(c.length>0&&e.length>0){var g=Math.floor(b/60);g<10&&(g="0"+g);var h=b-g*60;h<10&&(h="0"+h),c.html(g+":"+h),e.html("<i class='float-left fa-clock-o fa timer-icon'></i>"+g+":"+h)}if(b===0){clearInterval(d);var i=$("#question-"+a);i.html("<i class='float-left fa-clock-o fa timer-icon'></i> "+TIME_UP_MESSAGE);var j=$(".answer-"+a);j.length>0&&j.find(".load-next-question").trigger("click"),f()}b-=1}function f(){if(!c)return;$(".problem-"+c).children().not(".next-button-banner, .disabled-mcq").detach()}window.mcq_timers||(window.mcq_timers=[]);var d;mcq_timers.indexOf(a)===-1&&(mcq_timers.push(parseInt(a)),b>=0?d=setInterval(e,1e3):f())}function disableInputs(){var a=document.getElementsByTagName("input");if(a)for(var b=0;b<a.length;++b)a[b].disabled=!0}function log_question_viewed_activity(a){if(!a)return;$this=$(a),private_url_hash=$this.attr("id"),url=window.getCurrentLanguageCodeURL()+"/AJAX/log/problem/viewed/",event_id=window.headerObj.eventId,p_type_v=$this.attr("p-type"),data={event_id:event_id,p_type_v:p_type_v,private_url_hash:private_url_hash},$.ajax({url:url,type:"POST",data:data})}function closeDropDown(){$(".expand-box").hide()}function hide(a){$(a).addClass("hidden")}function show(a){$(a).removeClass("hidden")}function updateAncestorsOnLoaderMount(a,b){if(b<=0)return;var c=a.parents();for(var d=0;d<c.length&&d<b;d++)$(c[d]).addClass("no-scroll")}function updateAncestorsOnLoaderUnmount(a,b){if(b<=0)return;var c=a.parents();for(var d=0;d<c.length&&d<b;d++)$(c[d]).removeClass("no-scroll")}function insertLoader(a,b){if(typeof b=="undefined"||b===null)b={};var c='<div class="generic-loader-wrapper';b.isOpaque&&(c+=" white-background",a.children().addClass("forced-not-visible")),c+='">',b.loaderText&&(c+='<div class="loading-heading align-center standard-margin larger dark weight-700 large-20"',b.fontSize&&(c+='style="font-size: '+b.fontSize+'"'),c+=">"+b.loaderText+"</div>"),c+='<div class="nuskha-dots-loader-container dots-loader-container body-font-12 brand-gray align-center full-width"><div class="nuskha-dots-loader"><span></span><span></span><span></span></div></div></div>',a.css("position")==="static"&&a.css("position","relative").data("setInitialPos","static"),a.addClass("no-scroll full-height"),b.noScrollParentsLevel===undefined&&(b.noScrollParentsLevel=0),updateAncestorsOnLoaderMount(a,b.noScrollParentsLevel),a.data("noScrollParentsLevel",b.noScrollParentsLevel).append(c)}function removeLoader(a){updateAncestorsOnLoaderUnmount(a,a.data("noScrollParentsLevel")),a.removeClass("no-scroll full-height"),a.children().removeClass("forced-not-visible"),a.data("setInitialPos")==="static"&&a.css("position","static"),a.children(".generic-loader-wrapper").remove()}function loadScripts(a,b,c){if(typeof c!="undefined")var d=!1,e=!1,f=function(){return c&&c(),!1},g=setTimeout(f,4e4);var h=function(a,b){typeof c!="undefined"&&(d=!1,e=!0);var f=document.createElement("script");f.src=a,f.crossOrigin="anonymous",f.onload=function(){typeof c!="undefined"&&(d=!0,clearTimeout(g)),b()},f.onreadystatechange=function(){this.readyState=="complete"&&(typeof c!="undefined"&&(d=!0,clearTimeout(g)),b())},typeof c!="undefined"&&f.addEventListener("error",function(){d=!1,clearTimeout(g),b()},!0);var h=document.getElementsByTagName("head")[0];(h||document.body).appendChild(f)};(function(){if(typeof c!="undefined"&&d==0&&e==1)return c&&c(),!1;if(a.length==0)return b&&b(),!1;h(a.shift(),arguments.callee)})()}function getBrowserInfo(){navigator.sayswho=function(){var a=navigator.userAgent,b=navigator.appName,c,d=a.match(/(opera|chrome|safari|firefox|msie|trident)\/?\s*([\d\.]+)/i)||[];return d=d[2]?[d[1],d[2]]:[b,navigator.appVersion,"-?"],d&&(c=a.match(/version\/([\.\d]+)/i))!=null&&(d[2]=c[1]),d.join(" ")}();var a=navigator.sayswho,b=a.split(" ");a=b[0].toLowerCase(),version=b[1];var c=version.split(".");return version=parseInt(c[0]),{name:a,version:version}}function hideAlertContainer(){var a=$("#alert-message-holder");a.length==0&&(a=$("#fancy-alert-message-holder"));var b=a.find(".alert-message"),c=b.first(),d=c.clone();d.addClass("hidden"),b.each(function(){var a=$(this);a.hasClass("hidden")?a.remove():a.hasClass("permanent")||(a.hasClass("fancy-alert-message")?setTimeout(function(){a.slideUp(1e3)},2e3):setTimeout(function(){a.fadeOut(function(){a.remove()})},MESSAGE_FADEOUT_TIME))}),a.append(d)}function addAlert(a,b){var c=$("#alert-message-holder");c.length==0&&(c=$("#fancy-alert-message-holder"));var d=c.find(".alert-message"),e=d.first(),f=e.clone();f.find(".message").text(a),f.removeClass("permanent"),f.removeClass("hidden"),typeof b!=undefined&&b==1&&f.addClass("permanent"),c.append(f),hideAlertContainer()}function createCookie(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+c*24*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"}function readCookie(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return null}function eraseCookie(a){createCookie(a,"",-1)}function init_sticky(){$(".sticky-item").each(function(a){var b=$(this),c=b.attr("is-sticky");if(c!==undefined)return;var d={},e=b.attr("sticky-top");e===undefined?e=0:e=parseInt(e),d.topSpacing=e;var f=b.attr("sticky-bottom");f===undefined?f=0:f=parseInt(f),d.bottomSpacing=f,d.responsiveWidth=!0,b.sticky(d),b.attr("is-sticky","true"),b.width(b.width()+"px"),b.parent().css("height","auto")})}function domElementLive(){try{$(".tool-tip").tipTip({defaultPosition:"top"}),$(".no-escape-tool-tip").tipTip({defaultPosition:"top",noEscape:!0})}catch(a){debug&&console.log(a.message)}try{$(".nice-scrollbar").niceScroll(niceScrollArgs);var b=$(".nice-scrollbar").getNiceScroll();b.resize()}catch(a){debug&&console.log(a.message)}try{$(".custom-scrollbar").mCustomScrollbar(customScrollbarArgs)}catch(a){debug&&console.log(a.message)}try{$(".nice-scrollbar-dark").niceScroll(niceScrollArgs);var b=$(".nice-scrollbar-dark").getNiceScroll();b.resize()}catch(a){debug&&console.log(a.message)}try{styleCode()}catch(a){debug&&console.log(a.message)}$("form.disabled").each(function(){$(this).find("input").each(function(){$(this).attr("disabled","disabled")})}),init_sticky()}function readAndLoadExternalLinkInModal(a){var b=$("#external-link-content-wrapper > pre");b.html(LOADER_HTML),$.ajax({url:a,type:"GET",crossDomain:!0,success:function(a){b.text(a)},error:function(a){b.text(SOMETHING_WENT_WRONG_ERROR_TEXT)}})}function initLoadExternalURL(){$("body").on("click",".load-external-url",function(){var a=$(this).attr("href");if(!a)return!1;readAndLoadExternalLinkInModal(a)})}var AJAX_OK="OK",AJAX_ERROR="ERROR",PROBLEM_LIST=[],$testExperienceApp=$("#testExperienceApp"),jq_cache={},CLOSE_BROWSER=!1,isTestFinished=!1,moveToNextQuestion=function(){$(".load-next-question").click()},disable_submit_button=function(){var a=$$("#problem-detail"),b=a.find("input[type=submit]");b.length>0&&b.attr("disabled","disabled")},enable_submit_button=function(){var a=$$("#problem-detail"),b=a.find("input[type=submit]");b.length>0&&b.removeAttr("disabled")},reset_mcq_answer=function(){$("#problem-detail").find("input[type=radio]:checked").removeAttr("checked")};window.attemptedHashes=[];var markAttempted=function(a){window.attemptedHashes.indexOf(a)===-1&&window.attemptedHashes.push(a),$("#"+a).addClass("attempted")},markUnAttempted=function(a){window.attemptedHashes.indexOf(a)>-1&&window.attemptedHashes.splice(window.attemptedHashes.indexOf(a),1),$("#"+a).removeClass("attempted")},initAttempted=function(){var a=[],b;try{var b=JSON.parse($("#attempted-problems").val())}catch(c){var b={}}var d=Object.keys(b);d.forEach(function(c){a=a.concat(b[c])}),a.forEach(function(a){var b=$("[problem-id="+a+"]");b.length&&(b.addClass("attempted"),markAttempted(b.attr("id")))})};$(document).ready(function(){$(document).ajaxError(function(a,b,c,d){typeof Sentry!="undefined"&&Sentry.withScope(function(a){var e={type:c.type,url:c.url,data:c.data,status:b.status,error:d||b.statusText,response:b.responseText&&b.responseText.substring(0,100)};for(var f in e)a.setExtra(f,e[f]);Sentry.captureMessage("message",d||b.statusText)})}),initLoadExternalURL(),registerEvents(),hideAlertContainer()}),$testExperienceApp.on("click",".android-submit-button",function(){$(".android-start-flow").removeClass("android-start-flow")}),$("body").on("keyup",".test-input",function(){var a=$(this).val().length,b=1024-a;$(".test-input-remaining").html(b),b===0?$(".test-error").addClass("red-text"):$(".test-error").removeClass("red-text")}),$("body").on("click",".tab-container:not(.tab-selected)",function(a){$this=$(this),$sibling=$($this.siblings(".tab-selected")),$sibling.removeClass("tab-selected"),$this.addClass("tab-selected"),visible_content=$sibling.attr("data-container"),$("."+visible_content).hide(),hidden_content=$this.attr("data-container"),$("."+hidden_content).show()});var MESSAGE_FADEOUT_TIME=5e3;$("body").on("click",".show-modal",function(){var a=$(this).attr("target"),b=$("#"+a);return b.show(),b.modal({onClose:function(a){a.data.fadeOut(300),a.container.fadeOut(300,function(){a.overlay.hide(),$.modal.close(),$(".modal-window").hide()})},onOpen:function(a){a.overlay.fadeIn(300),a.data.show(),a.container.fadeIn(300)},onShow:function(a){var c=b.attr("execute-on-show");if(c){execute_commands=c.split(" ");for(var d=0;d<execute_commands.length;d++)window[execute_commands[d]]()}}}),!1});var LOADER_HTML='<div class="nuskha-dots-loader-container dots-loader-container body-font-12 brand-gray align-center full-width"><div class="nuskha-dots-loader"><span></span><span></span><span></span></div></div>',HORIZONTAL_LOADER_HTML='<div class="horizontal-loader"></div>',LOADER_HTML_NO_MARGIN='<div class="dots-loader-no-margin nuskha-dots-loader-container dots-loader-container body-font-12 brand-gray align-center full-width"><div class="nuskha-dots-loader"><span></span><span></span><span></span></div></div>',LOADER_HTML_WITH_MARGIN='<div class="dots-loader" style="margin: 30px 0 30px 0";></div>';$(".ajax-modal").live("click",function(){var a=$(this).attr("ajax"),b=$(this).attr("target"),c=$("#"+b),d=$(this).attr("method");return d||(d="POST"),c.show(),c.hasClass("large-modal")?c.modal({onClose:function(a){$.modal.close(),$(".modal-window").hide()},minHeight:600,minWidth:830}):c.hasClass("very-large-modal")?c.modal({onClose:function(a){$.modal.close(),$(".modal-window").hide()},minHeight:600,minWidth:960}):c.hasClass("fix-modal-top")?c.modal({onClose:function(a){$.modal.close(),$(".modal-window").hide()},minHeight:450}):c.modal({onClose:function(a){$.modal.close(),$(".modal-window").hide()}}),c.find(".modal-content").prepend(LOADER_HTML),$.ajax({type:d,url:a,dataType:"json",success:function(a){if(a["status"]==AJAX_OK){c.html(a.data);var b=a.url;b&&window.open(b,"_blank"),a.alert_message&&addAlert(a.alert_message)}else $.modal.close(),$(".modal-window").hide();domElementLive()},error:function(a){$.modal.close(),$(".modal-window").hide()},statusCode:{404:function(){alert("There was some error in accessing the resource, re-loading the page."),window.location.reload()},403:function(){window.location.reload()}}}),!1}),$(".close-modal-window").live("click",function(){$.modal.close(),$(".modal-window").hide()});